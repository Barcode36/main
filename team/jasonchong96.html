<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.6.1"><title>Jason Chong Yi Sheng - Project Portfolio</title><link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css"></head><body class="article"><div id="site-header"><nav class="navbar navbar-light bg-light"><div class="container"><a class="navbar-brand" href="../index.html">Expense Tracker</a><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="../UserGuide.html">User Guide</a></li><li class="nav-item"><a class="nav-link" href="../DeveloperGuide.html">Developer Guide</a></li><li class="nav-item"><a class="nav-link active" href="../AboutUs.html">About Us</a></li><li class="nav-item"><a class="nav-link" href="../ContactUs.html">Contact Us</a></li><li class="navitem"><a class="nav-link" href="https://github.com/CS2103-AY1819S1-T12-1/main"><span class="fa fa-github fa-lg" aria-hidden="true"></span>&nbsp;View on GitHub</a></li></ul></div></nav></div><div id="header"><h1>Jason Chong Yi Sheng - Project Portfolio</h1></div><div id="content"><div class="sect1">
<h2 id="project-expensetracker"><a class="link" href="#project-expensetracker">PROJECT: ExpenseTracker</a></h2>
<div class="sectionbody">
<hr>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="link" href="#overview">Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This portfolio aims to document the contributions made by <strong>Jason Chong Yi Sheng</strong> to the <strong>ExpenseTracker</strong>.</p>
</div>
<div class="paragraph">
<p><strong>ExpenseTracker</strong> is a desktop expense tracking application developed to aid users in tracking their expenses and
save money. The user interacts with it using a Command Line Interface (CLI), and it has a Graphical User Interface
(GUI) created with JavaFX library. It is written in Java, and has about 20 kLoC. The product was morphed from an <a href="https://github.com/nus-cs2103-AY1819S1/addressbook-level4">Address Book</a> over a period of 8 weeks
under the constraints described <a href="https://nus-cs2103-ay1819s1.github.io/cs2103-website/admin/project-constraints.html">here</a>.</p>
</div>
<div class="paragraph">
<p>Some of its main features are:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Setting a budget for expenses.</p>
</li>
<li>
<p>Data security.</p>
</li>
<li>
<p>Categorization of expenses.</p>
</li>
<li>
<p>Statistics for expenses.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-contributions"><a class="link" href="#summary-of-contributions">Summary of contributions</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Major enhancement</strong>: added <strong>Data Security</strong></p>
<div class="ulist">
<ul>
<li>
<p>What it does: Allows multiple users to use the application on the same machine without being able to view or affect each other&#8217;s data without their passwords. Also keeps each user&#8217;s data file encrypted and inaccessible by others.</p>
</li>
<li>
<p>Justification: This feature improves the product significantly because multiple users can share the application on the same computer. For many people, financial information is often kept private so this function allows them to use the application without fear of other&#8217;s having unauthorized access to their spending data.</p>
</li>
<li>
<p>The following are the highlights of this feature:</p>
<div class="ulist">
<ul>
<li>
<p>This enhancement adds a robust user accounts system that comes with several features, namely <code>signup</code>, <code>login</code> and <code>setpassword</code>. Each user&#8217;s data file is kept separately and explicitly labelled with their username. The implementation too was challenging as it required changes to how data is loaded in the <code>Storage</code> component and stored in the <code>Model</code> component.</p>
</li>
<li>
<p>The encryption algorithm also makes use of hash algorithms and the AES symmetric key encryption algorithm to ensure that no one can gain access to a user&#8217;s information unless he/she knows the plain text password of the user, which is not stored anywhere.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Credits: Google Guava library for common hashing algorithms.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Code contributed</strong>: [<a href="https://nus-cs2103-ay1819s1.github.io/cs2103-dashboard/#=undefined&amp;search=jasonchong96">Code collated by RepoSense</a>]</p>
</li>
<li>
<p><strong>Other contributions</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Project management:</p>
<div class="ulist">
<ul>
<li>
<p>Managed releases <code>v1.1</code> - <code>v1.4</code> (5 releases) on GitHub</p>
</li>
</ul>
</div>
</li>
<li>
<p>Community:</p>
<div class="ulist">
<ul>
<li>
<p>PRs reviewed (with non-trivial review comments): <a href="https://github.com/CS2103-AY1819S1-T12-1/main/pull/25">#25</a>, <a href="https://github.com/CS2103-AY1819S1-T12-1/main/pull/30">#30</a>, <a href="https://github.com/CS2103-AY1819S1-T12-1/main/pull/35">#35</a>, <a href="https://github.com/CS2103-AY1819S1-T12-1/main/pull/39">#39</a>, <a href="https://github.com/CS2103-AY1819S1-T12-1/main/pull/70">#70</a>, <a href="https://github.com/CS2103-AY1819S1-T12-1/main/pull/82">#82</a>)</p>
</li>
<li>
<p>Attempts to help other batch mates on forums (examples:
<a href="https://github.com/nus-cs2103-AY1819S1/forum/issues/111">1</a>,
<a href="https://github.com/nus-cs2103-AY1819S1/forum/issues/58">2</a>)</p>
</li>
<li>
<p>Reported bugs and suggestions for other teams in the class (examples:  <a href="https://github.com/CS2103-AY1819S1-W14-2/main/issues/138">1</a>
, <a href="https://github.com/CS2103-AY1819S1-W14-2/main/issues/135">2</a>
, <a href="https://github.com/CS2103-AY1819S1-W14-2/main/issues/125">3</a>
, <a href="https://github.com/CS2103-AY1819S1-W14-2/main/issues/122">4</a>
, <a href="https://github.com/CS2103-AY1819S1-W14-2/main/issues/120">5</a>
, <a href="https://github.com/CS2103-AY1819S1-W14-2/main/issues/116">6</a>
, <a href="https://github.com/CS2103-AY1819S1-W14-2/main/issues/113">7</a>
)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Tools:</p>
<div class="ulist">
<ul>
<li>
<p>Integrated the following Github plugins to the team repo: TravisCI, Appveyor, Codacy, Coveralls</p>
</li>
<li>
<p>Added Reposense configuration file to allow for collation of teammates' code contributions</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-user-guide"><a class="link" href="#contributions-to-the-user-guide">Contributions to the User Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the User Guide. They showcase my ability to write documentation targeting end-users.</em></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="features"><a class="link" href="#features">Features</a></h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Before you are logged in, only <code>login</code>, <code>signup</code> and <code>help</code> commands are useable.</p>
</li>
<li>
<p>After you are logged in, the rest of the commands will become useable.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>These are the commands available to use in Expense Tracker:</p>
</div>
<div class="sect2">
<h3 id="signing-up-a-user-code-signup-code"><a class="link" href="#signing-up-a-user-code-signup-code">Signing up a user : <code>signup</code></a></h3>
<div class="paragraph">
<p>Creates a new user in Expense Tracker. You can log in to your newly created user after signing up.</p>
</div>
<div class="paragraph">
<p>Format: <code>signup USERNAME</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><strong>Examples:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>signup username123</code><br>
Signs up a user with the username "username123".</p>
</li>
</ul>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>USERNAME must be 1 to 250 characters long</p>
</li>
<li>
<p>USERNAME cannot contain white spaces or any of the following characters :  &gt; &lt; : \ / | ?</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="logging-in-as-an-existing-user-code-login-code"><a class="link" href="#logging-in-as-an-existing-user-code-login-code">Logging in as an existing user : <code>login</code></a></h3>
<div class="paragraph">
<p>Logs in to Expense Tracker as an existing user and expands the user interface to show Expense Tracker if it is not already showing.</p>
</div>
<div class="paragraph">
<p>Format: <code>login u/USERNAME [p/PASSWORD]</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><strong>Examples:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>login u/username123</code><br>
Logs in a user with the username "username123".</p>
</li>
<li>
<p><code>login u/username1234 p/password1</code><br>
Logs in a user with the username "username1234" with password "password1".</p>
</li>
</ul>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>USERNAME is case insensitive</p>
</li>
<li>
<p>PASSWORD is case sensitive</p>
</li>
<li>
<p>PASSWORD cannot contain any spaces and must be 6 to 100 characters long</p>
</li>
<li>
<p>Expense Tracker contains a sample user with USERNAME <code>sample</code></p>
</li>
<li>
<p>If a user has no password set, then the login will be successful
regardless of whether a PASSWORD has been provided</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If the log in is successful (ie. the USERNAME and PASSWORD are correct and the user&#8217;s data has no issues), then the UI will be expanded as shown in the diagram below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/implementation/ReadAllExpensesSequenceDiagram.png" alt="ReadAllExpensesSequenceDiagram" width="512">
</div>
<div class="title">Figure 1. Diagram showing log in success UI expansion for sample user</div>
</div>
</div>
<div class="sect2">
<h3 id="setting-a-password-for-the-current-user-code-setpassword-code"><a class="link" href="#setting-a-password-for-the-current-user-code-setpassword-code">Setting a password for the current user : <code>setPassword</code></a></h3>
<div class="paragraph">
<p>Sets a new password for the user which is currently logged in.</p>
</div>
<div class="paragraph">
<p>Format: <code>setPassword n/NEW_PASSWORD [o/OLD_PASSWORD]</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><strong>Examples:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>setPassword n/pass123</code><br>
Sets the current user&#8217;s password as "pass123", provided that there is no previously set password</p>
</li>
<li>
<p><code>setPassword n/pass123 o/password1</code><br>
Sets the current user&#8217;s password as "pass123", provided that the current password is "password1"</p>
</li>
</ul>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>OLD_PASSWORD is needed if a password has been previously set for the current user and they have to match.</p>
</li>
<li>
<p>OLD_PASSWORD and NEW_PASSWORD are case sensitive</p>
</li>
<li>
<p>OLD_PASSWORD and NEW_PASSWORD cannot contain any spaces and must be 6 to 100 characters long</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="encrypting-text-using-your-password-code-encrypt-code"><a class="link" href="#encrypting-text-using-your-password-code-encrypt-code">Encrypting text using your password : <code>encrypt</code></a></h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This command is for advanced users only and should be used with caution.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Encrypts text using your account&#8217;s password.
You may want to use this feature if you wish to edit your expenses in the data file directly.</p>
</div>
<div class="paragraph">
<p>Format: <code>encrypt TEXT</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><strong>Examples:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>encrypt secret thing</code><br>
Displays the encrypted version of the text <code>secret thing</code> to be used with your account.</p>
</li>
<li>
<p><code>encrypt secret_thing</code><br>
Displays the encrypted version of the text <code>secret_thing</code> to be used with your account.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Any leading and trailing spaces in TEXT are ignored</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="decrypting-text-using-your-password-code-decrypt-code"><a class="link" href="#decrypting-text-using-your-password-code-decrypt-code">Decrypting text using your password : <code>decrypt</code></a></h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>This command has been omitted from this Portfolio as it is largely a repetition of the encrypt command, except that it decrypts strings rather than encrypt them. You can view this section in the <code>UserGuide</code> if you wish to</em></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="frequently-asked-questions"><a class="link" href="#frequently-asked-questions">Frequently Asked Questions</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Q</strong>: How is my expense data kept safe when I use this application?<br>
<strong>A</strong>: All user expense-specific data is encrypted. The program ensures that no one will be able to decrypt encrypted information without your actual plain text password, which is not stored anywhere. So rest assured that no one can access your data without your password.</p>
</div>
<div class="paragraph">
<p><strong>Q</strong>: How do I manually encrypt text to edit my user XML file as a technologically-savvy user?<br>
<strong>A</strong>: You can make use of the encrypt and decrypt commands that have been described in the previous section.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the Developer Guide. They showcase my ability to write technical documentation and the technical depth of my contributions to the project.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="data-security"><a class="link" href="#data-security">Data Security</a></h3>
<div class="paragraph">
<p>The Expense Tracker ensures the security of users' data through the user accounts system and data encryption.</p>
</div>
<div class="paragraph">
<p>The user accounts system allows multiple users to use Expense Tracker on the same computer without interfering with each other&#8217;s data. It also includes an optional password system that allows users to protect their Expense Tracker information from being viewed or altered by others.</p>
</div>
<div class="paragraph">
<p>The encryption system ensures all expense data (excluding budget) is encrypted within the xml storage files.</p>
</div>
<div class="sect3">
<h4 id="current-implementation"><a class="link" href="#current-implementation">Current Implementation</a></h4>
<div class="paragraph">
<p>On initialization, <code>MainApp</code> class loads all xml files within the data folder according to the path in <code>UserPrefs</code>. The data is loaded by <code>MainApp#initModelManager(Storage, UserPref)</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The username value will be forced to match the name of the xml data filename (ignoring file extentions).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This feature is facilitated by newly added methods in the Model interface which now supports the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Model#loadUserData(Username, Password)</code>&#8201;&#8212;&#8201;Logs in to the user with the input <code>Username</code> and <code>Password</code> and loads the associated data into <code>Model</code>. Returns true if the <code>Password</code> matches the user&#8217;s <code>Password</code>, else the user is not logged into and false is returned</p>
</li>
<li>
<p><code>Model#unloadUserData()</code>&#8201;&#8212;&#8201;Unselects the user in <code>Model</code></p>
</li>
<li>
<p><code>Model#isUserExists(Username)</code>&#8201;&#8212;&#8201;Checks if a user with the input <code>Username</code> exists in <code>Model</code></p>
</li>
<li>
<p><code>Model#addUser(Username)</code>&#8201;&#8212;&#8201;Adds a new user with the given <code>Username</code> to <code>Model</code></p>
</li>
<li>
<p><code>Model#hasSelectedUser()</code>&#8201;&#8212;&#8201;Checks if a user is currently logged in in <code>Model</code></p>
</li>
<li>
<p><code>Model#setPassword(Password, String)</code>&#8201;&#8212;&#8201;Changes the <code>Password</code> of the user that is currently logged in. Requires the new password as a <code>Password</code> object and as a plain text <code>String</code>.</p>
</li>
<li>
<p><code>Model#isMatchPassword(Password)</code>&#8201;&#8212;&#8201;Checks if the input <code>Password</code> matches the name</p>
</li>
<li>
<p><code>Model#encryptString(String)</code>&#8201;&#8212;&#8201;Encrypts the input <code>String</code> using the currently logged in user&#8217;s encryption key</p>
</li>
<li>
<p><code>Model#decryptString(String)</code>&#8201;&#8212;&#8201;Decrypts the input <code>String</code> using the currently logged in user&#8217;s encryption key.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When implementing methods in <code>ModelManager</code> that requires a user to already be logged in, one can use <code>ModelManager#requireUserSelected()</code>, which throws a checked <code>NoUserSelectedException</code> if there is no logged in user. I.e your method should look like this:</p>
</div>
<div class="listingblock">
<div class="title">New method example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="type">void</span> methodName() <span class="directive">throws</span> NoUserSelectedException {
    requireUserSelected();
    <span class="comment">/*
    Perform required operations here.
    */</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The classes <code>Username</code> and <code>Password</code> have also been implemented and have the following noteworthy characteristics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Two <code>Username</code> classes are equivalent if and only if the internal username <code>String</code> are equivalent (case-insensitive).</p>
</li>
<li>
<p><code>Username</code> cannot be constructed with a <code>String</code> containing a white space or any of the following characters: <em>" &gt; &lt; : \ / | ? *</em></p>
</li>
<li>
<p>When a <code>Password</code> class is constructed with plain text, the password is hashed using SHA-256 before being stored as an internal <code>String</code> in the <code>Password</code> object</p>
</li>
<li>
<p><code>Password</code> is only valid if the plain text form is at least 6 characters long</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Utility methods related to data encryption are implemented in the <code>EncryptionUtil</code> class, which includes the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>EncryptionUtil#decryptString(String, String)</code>&#8201;&#8212;&#8201;Decrypts a <code>String</code> with by using the input encryption key</p>
</li>
<li>
<p><code>EncryptionUtil#encryptString(String, String)</code>&#8201;&#8212;&#8201;Encrypts a <code>String</code> with by using the input encryption key</p>
</li>
<li>
<p><code>EncryptionUtil#createEncryptionKey(String)</code>&#8201;&#8212;&#8201;Creates a 128-bit encryption key using the input plain text password <code>String</code>. Equivalent passwords will always map to equivalent keys.</p>
</li>
<li>
<p><code>EncryptionUtil#encryptExpense(Expense, String)</code>&#8201;&#8212;&#8201;Creates an <code>EncryptedExpense</code> instance of the given <code>Expense</code> by encrypting its data using the given encryption key</p>
</li>
<li>
<p><code>EncryptionUtil#encryptTracker(ExpenseTracker)</code>&#8201;&#8212;&#8201;Creates an <code>EncryptedExpenseTracker</code> instance of the given <code>ExpenseTracker</code> by encrypting it using its encryption key. This is always called when sending users' data to <code>Storage</code> for saving.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Encrypted versions of the <code>ExpenseTracker</code> and most of the classes it contains were implemented. These classes have their class names prepended with <code>Encrypted</code> and are shown in the class diagram below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/implementation/EncryptionClassDiagram.png" alt="EncryptionClassDiagram" width="1024">
</div>
<div class="title">Figure 2. Class diagram for <code>Enrypted</code> classes</div>
</div>
<div class="paragraph">
<p>The following are other noteworthy details of the implementation for data encryption:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Users' expense data are encrypted using <code>AES</code> encryption with a 128-bit <code>MurmurHash</code> of their plain text password as the encryption key. These are not stored anywhere in the data files to ensure the security of their data.</p>
</li>
<li>
<p>The encrypted information is stored in new classes to ensure that encrypted data is not used before decryption.</p>
</li>
<li>
<p>The encrypted information has to be stored in <code>Model</code> as the encryption key will only be known at runtime when a user logs in with his/her correct <code>Password</code>.</p>
</li>
<li>
<p>Each Encrypted class will know how to decrypt itself into its decrypted equivalent. e.g <code>EncryptedExpenseField#decrypt(String)</code> uses the input <code>String</code> as an encryption key to decrypt itself into a <code>ExpenseField</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Below is an example usage scenario and how the User Account System behaves at each step when the application is launched.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The user launches the application and the directory path in the UserPref points at the <em>data</em> folder</p>
</li>
<li>
<p>The method <code>StorageManager#readAllExpenses(Path)</code> is called by the MainApp and the method loads all the xml data files in the <em>data</em> folder and returns the loaded data as a <code>Map&lt;Username, EncryptedExpensetracker&gt;</code> with the <code>Username</code> of the user data as the key and the user data as an <code>EncryptedExpenseTracker</code> as the value to the MainApp class.</p>
</li>
<li>
<p>A <code>Model</code> instance will then be initialized using the previously mentioned <code>Map</code> of user data.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Below is the UML sequence diagram of the <code>StorageManager#readAllExpenses(Path)</code> method mentioned.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/implementation/ReadAllExpensesSequenceDiagram.png" alt="ReadAllExpensesSequenceDiagram" width="512">
</div>
<div class="title">Figure 3. Sequence diagram of the <code>StorageManager#readAllExpenses(Path)</code> method</div>
</div>
<div class="paragraph">
<p>Below is an example usage scenario and how the Sign Up and Login system behaves at each step after the application is launched.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The user executes the command <code>signup john</code> to create a user with the <code>Username</code> john</p>
</li>
<li>
<p>The <code>signup</code> command calls <code>Model#addUser(Username)</code> which adds the user <code>john</code> to <code>Model</code>. The operation is successful as <code>john</code> does not break any of the <code>Username</code> constraints and does not already exist in the Model.</p>
</li>
<li>
<p>The user then executes the command <code>login u/john</code> to log in to his user account</p>
</li>
<li>
<p>The <code>login</code> command calls <code>loadUserData(Username, Password)</code> with a null password as a password was not provided. The method is executed successfully as the user <code>john</code> has no password set.</p>
</li>
<li>
<p><code>john</code>&#8217;s data that is stored as <code>EncryptedExpenseTracker</code> is decrypted using the <code>EncryptedExpenseTracker#decryptTracker(String)</code> using an encryption key generated from <code>john</code>&#8217;s password (In this case an empty <code>String</code> is used as the password since <code>john</code>&#8217;s account has no password).</p>
</li>
<li>
<p>The selected data in <code>Model</code> is switched to <code>john</code>&#8217;s and an <code>UserLoggedInEvent</code> is raised for <code>UI</code> to show <code>john</code>&#8217;s Expense Tracker data</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Below is the UML sequence diagram that shows how <code>SignUpCommand</code> works.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/implementation/SignUpCommandSequenceDiagram.png" alt="SignUpCommandSequenceDiagram" width="800">
</div>
<div class="title">Figure 4. Sequence diagram showing how <code>SignUpCommand</code> works</div>
</div>
<div class="paragraph">
<p>Below is the UML sequence diagram that shows how <code>LoginCommand</code> works.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/implementation/LoginCommandSequenceDiagram.png" alt="LoginCommandSequenceDiagram" width="800">
</div>
<div class="title">Figure 5. Sequence diagram showing how <code>LoginCommand</code> works</div>
</div>
<div class="paragraph">
<p>Below is an example usage scenario and how the Password system behaves at each step after the he/she is logged in.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The user is already logged in to the account <code>john</code> with an existing password <code>password1</code> and executes the command <code>setpassword o/password1 n/password2</code> to change his password to <code>password2</code></p>
</li>
<li>
<p>The <code>setpassword</code> command calls the <code>Model#setPassword(Password)</code> method since the given old password matches his existing password and <code>password2</code> does not violate any password constraints</p>
</li>
<li>
<p>The <code>Model#setPassword(Password)</code> method changes <code>john</code>&#8217;s account password to <code>password2</code></p>
</li>
<li>
<p><code>john</code>&#8217;s expense data gets encrypted using a new encryption key generated from the <code>String</code> <code>password2</code>. This also applies in future whenever it is saved to the data file.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Below is the UML sequence diagram that shows how <code>SetPasswordCommand</code> works.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/implementation/SetPasswordCommandSequenceDiagram.png" alt="SetPasswordCommandSequenceDiagram" width="800">
</div>
<div class="title">Figure 6. Sequence diagram showing how <code>SetPasswordCommand</code> works</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-storage-of-separate-user-data"><a class="link" href="#aspect-storage-of-separate-user-data">Aspect: Storage of Separate User Data</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Save each user&#8217;s data into a seperate xml file</p>
<div class="ulist">
<ul>
<li>
<p>Pros: More work needed to implement as the data loading has to be changed to read from multiple xml files</p>
</li>
<li>
<p>Cons: Users can transfer their own data between computers easily by just copying their own account&#8217;s xml file</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Save all the separated user data in a single xml data file</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Relatively easier to implement. ExpenseTracker already loads data from a single xml data file so less work has to be done to change the storage structure</p>
</li>
<li>
<p>Cons: Users will be unable to easily transfer their individual data to another computer</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="aspect-loading-of-user-data"><a class="link" href="#aspect-loading-of-user-data">Aspect: Loading of User Data</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Loading of User data is only done on initialization of Expense Tracker</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Ability to switch user accounts quickly after Expense Tracker is loaded as all users are already loaded into memory</p>
</li>
<li>
<p>Cons: External changes to the data files after initialization will not be reflected may be overwritten</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> User data is loaded only when the user attempts to log in</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Unnecessary data is not kept in memory so memory space is not wasted</p>
</li>
<li>
<p>Cons: The Model or Logic component will have to depend on the Storage component as the login command will require the Storage to load and return the user&#8217;s data.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div></div><div id="footer"><div class="container"><div id="footer-text">Last updated 2018-11-12 10:59:02 UTC</div></div></div></body></html>